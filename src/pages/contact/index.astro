---
import BaseLayout from '../../layouts/BaseLayout.astro';
import ContactForm from '../../components/ContactForm.astro';

// Get query parameters for print requests
const url = new URL(Astro.request.url);
const photoSlug = url.searchParams.get('photo') || undefined;
const photoTitle = url.searchParams.get('title') || undefined;

const isPrintRequest = !!photoSlug;
---

<BaseLayout
  title="Contact"
  description="Contact Shalini Prabha for print inquiries and collaboration opportunities."
>
  <div class="page-content">
    <div class="container">
      <div class="contact-page">
        <h1>{isPrintRequest ? 'Request a Print' : 'Contact'}</h1>

        {isPrintRequest ? (
          <p class="intro">
            Interested in a print of <strong>{photoTitle || 'this photo'}</strong>?
            Fill out the form below with your preferred size and any questions, and I'll get back to you with pricing and availability.
          </p>
        ) : (
          <p class="intro">
            Interested in prints or have a question? Fill out the form below and I'll get back to you.
          </p>
        )}

        {isPrintRequest && (
          <p class="print-note">
            Prints are available on archival-quality paper in various sizes.
            <a href={`/${photoSlug?.split('/')[0] || 'birds'}/${photoSlug}/`} class="back-link">
              &larr; Back to photo
            </a>
          </p>
        )}

        <ContactForm photoSlug={photoSlug} photoTitle={photoTitle} />
      </div>
    </div>
  </div>
</BaseLayout>

<style>
  .contact-page {
    max-width: 600px;
    margin: 0 auto;
    padding: 3rem 0;
  }

  .contact-page h1 {
    font-size: 2rem;
    font-weight: 500;
    margin-bottom: 1rem;
  }

  .intro {
    color: #666;
    margin-bottom: 1.5rem;
    line-height: 1.6;
  }

  .intro strong {
    color: #1a1a1a;
  }

  .print-note {
    font-size: 0.9rem;
    color: #666;
    margin-bottom: 2rem;
    padding: 1rem;
    background: #f5f5f5;
    border-radius: 6px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .back-link {
    color: #666;
    font-size: 0.85rem;
  }

  .back-link:hover {
    color: #1a1a1a;
  }
</style>
